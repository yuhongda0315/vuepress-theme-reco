(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{334:function(t,s,a){"use strict";a.r(s);var r=a(2),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("nav",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"# RTC-Media-Gateway"}},[t._v(" RTC-Media-Gateway")]),a("ul",[a("li",[a("a",{attrs:{href:"# 业务流程"}},[t._v(" 业务流程")])]),a("li",[a("a",{attrs:{href:"# API"}},[t._v(" API")]),a("ul",[a("li",[a("a",{attrs:{href:"# 通用"}},[t._v(" 通用")])])])])])]),a("li",[a("a",{attrs:{href:"# 服务状态接口"}},[t._v(" 服务状态接口")])]),a("li",[a("a",{attrs:{href:"# 微信小程序"}},[t._v(" 微信小程序")]),a("ul",[a("li",[a("a",{attrs:{href:"# 客户端资源协商"}},[t._v(" 客户端资源协商")])]),a("li",[a("a",{attrs:{href:"# 客户端退出"}},[t._v(" 客户端退出")])])])]),a("li",[a("a",{attrs:{href:"# RTMP Gateway 接口"}},[t._v(" RTMP Gateway 接口")]),a("ul",[a("li",[a("a",{attrs:{href:"# 发布或更新 rtmp"}},[t._v(" 发布或更新 rtmp")])]),a("li",[a("a",{attrs:{href:"# rtmp 退出"}},[t._v(" rtmp 退出")])])])])])]),a("h4",{attrs:{id:"rtc-media-gateway"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rtc-media-gateway"}},[t._v("#")]),t._v(" RTC-Media-Gateway")]),t._v(" "),a("p",[t._v("各种协商网关")]),t._v(" "),a("ul",[a("li",[t._v("微信小程序")])]),t._v(" "),a("h5",{attrs:{id:"业务流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#业务流程"}},[t._v("#")]),t._v(" 业务流程")]),t._v(" "),a("canvas",{attrs:{width:"800",sequenced:""}},[t._v("\n  Wechat-Client -> Media-Gateway: /wechat/exchange\n  Media-Gateway -> RTMP-Server: genereate rtmpUri\n  RTMP-Server -> Media-Gateway: rtmpUri\n  Media-Gateway -> Stream-Server: /rtmp/exchange\n  Stream-Server -> Media-Server: /exchange\n  Media-Server -> Stream-Server: get publish uris, sub uris\n  Stream-Server <-> RTMP-Server: rtmp2rtc\n  Stream-Server <-> RTMP-Server: rtc2rtmp\n  Stream-Server -> Media-Gateway: exchange response\n  Media-Gateway -> Wechat-Client: exchange repsonse\n")]),t._v(" "),a("h5",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("h6",{attrs:{id:"通用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通用"}},[t._v("#")]),t._v(" 通用")]),t._v(" "),a("h4",{attrs:{id:"服务状态接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务状态接口"}},[t._v("#")]),t._v(" 服务状态接口")]),t._v(" "),a("p",[t._v("主要用于监控服务状态。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Method: "),a("code",[t._v("HTTP GET")])])]),t._v(" "),a("li",[a("p",[t._v("URL: "),a("code",[t._v("/monitor/state")])])]),t._v(" "),a("li",[a("p",[t._v("Content-Type: "),a("code",[t._v("json")])])]),t._v(" "),a("li",[a("p",[t._v("Request Header")])])]),t._v(" "),a("p",[t._v("无")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Request Body")])]),t._v(" "),a("li",[a("p",[t._v("示例")])])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h4",{attrs:{id:"微信小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序"}},[t._v("#")]),t._v(" 微信小程序")]),t._v(" "),a("h5",{attrs:{id:"客户端资源协商"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端资源协商"}},[t._v("#")]),t._v(" 客户端资源协商")]),t._v(" "),a("p",[t._v("订阅、发布、变更资源，均可以使用此接口。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Method: "),a("code",[t._v("HTTP POST")])])]),t._v(" "),a("li",[a("p",[t._v("URL: "),a("code",[t._v("/wechat/exchange")])])]),t._v(" "),a("li",[a("p",[t._v("Content-Type: "),a("code",[t._v("json")])])]),t._v(" "),a("li",[a("p",[t._v("Request Header")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Client-Version")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("sdk版本号")]),t._v(" "),a("td",[t._v("接口版本号，要求填写真实sdk版本号，越详细越好")])]),t._v(" "),a("tr",[a("td",[t._v("Client-Type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("WeChat-MiniProgram")]),t._v(" "),a("td",[t._v("xiaomi、华为、iphone8、windows2010")])]),t._v(" "),a("tr",[a("td",[t._v("Token")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("VoIP Token")]),t._v(" "),a("td",[t._v("用于鉴权，其中也携带了 App 或房间的相关配置")])]),t._v(" "),a("tr",[a("td",[t._v("Room-Id")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("房间 ID")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("App-Key")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("开发者的Key")]),t._v(" "),a("td")])])]),t._v(" "),a("ul",[a("li",[t._v("Request Body")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("rtmp")]),t._v(" "),a("td",[t._v("dict")]),t._v(" "),a("td",[t._v("客户端要发送本地流的 rtmp 信息")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmp.audio")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("true/false")]),t._v(" "),a("td",[t._v("是否发送音频")])]),t._v(" "),a("tr",[a("td",[t._v("rtmp.video")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("true/false")]),t._v(" "),a("td",[t._v("是否发送视频")])]),t._v(" "),a("tr",[a("td",[t._v("rtmp.resolution")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("0X0")]),t._v(" "),a("td",[t._v("视频分辨率")])]),t._v(" "),a("tr",[a("td",[t._v("subscribeList")]),t._v(" "),a("td",[t._v("list")]),t._v(" "),a("td",[t._v("订阅列表，与普通 RTC 格式完全一致")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("subscribeList..uri")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("资源 URI")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("subscribeList..simulcast")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("资源订阅大流或小流(1: 大流，2: 小流，为空")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("默认小流)")]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmpSubscribeList")]),t._v(" "),a("td",[t._v("list")]),t._v(" "),a("td",[t._v("订阅 rtmp 列表，用于计费")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmpSubscribeList..userId")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("要拉取的 rtmp 用户的 userId，用于计费")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmpSubscribeList..rtmpUri")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("要拉取的用户的 rtmp URI，用于计费")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[t._v("示例:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"audio"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"video"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resolution"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0X0"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subscribeList"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"simulcast"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmpSubscribeList"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmpUri"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtmp://XXXXX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("ul",[a("li",[t._v("Response")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("resultCode")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("错误码")]),t._v(" "),a("td",[t._v("10000 为成功")])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("错误原因")]),t._v(" "),a("td",[t._v("若请求成功，则为空")])]),t._v(" "),a("tr",[a("td",[t._v("sdp")]),t._v(" "),a("td",[t._v("json")]),t._v(" "),a("td",[t._v("sdp信息")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("publishList")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("发布的 rtmp 对应的 webrtc URL，用于扩散")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmpPublishList")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("用于推送的 rtmp 地址，可以用于扩散")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmpPublishList..rtmpUri")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("用于推送的 rtmp 地址，可以用于扩散")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("clusterId")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("数据中心域名")]),t._v(" "),a("td",[t._v("防止数据中心漂移,后续请求采用该地址;如果前面带http:// 标示服务器不支持https")])])])]),t._v(" "),a("p",[t._v("正常示例:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publishList"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发布的资源")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mediaType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mediaType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmpPublishList"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmpUri"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtmp://XXXXX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("异常示例:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http server hasn\'t the processor"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h5",{attrs:{id:"客户端退出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端退出"}},[t._v("#")]),t._v(" 客户端退出")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Method: "),a("code",[t._v("HTTP POST")])])]),t._v(" "),a("li",[a("p",[t._v("URL: "),a("code",[t._v("/wechat/exit")])])]),t._v(" "),a("li",[a("p",[t._v("Content-Type: "),a("code",[t._v("json")])])]),t._v(" "),a("li",[a("p",[t._v("Request Header")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Client-Version")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("sdk版本号")]),t._v(" "),a("td",[t._v("接口版本号，要求填写真实sdk版本号，越详细越好")])]),t._v(" "),a("tr",[a("td",[t._v("Client-Type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("WeChat-MiniProgram")]),t._v(" "),a("td",[t._v("xiaomi、华为、iphone8、windows2010")])]),t._v(" "),a("tr",[a("td",[t._v("Token")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("VoIP Token")]),t._v(" "),a("td",[t._v("用于鉴权，其中也携带了 App 或房间的相关配置")])]),t._v(" "),a("tr",[a("td",[t._v("Room-Id")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("房间 ID")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("App-Key")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("开发者的Key")]),t._v(" "),a("td")])])]),t._v(" "),a("ul",[a("li",[t._v("Request Body")])]),t._v(" "),a("p",[t._v("无")]),t._v(" "),a("ul",[a("li",[t._v("Response")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("resultCode")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("错误码")]),t._v(" "),a("td",[t._v("10000 为成功")])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("错误原因")]),t._v(" "),a("td",[t._v("若请求成功，则为空")])])])]),t._v(" "),a("ul",[a("li",[t._v("正常示例")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("异常示例")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http server hasn\'t the processor"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"rtmp-gateway-接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rtmp-gateway-接口"}},[t._v("#")]),t._v(" RTMP Gateway 接口")]),t._v(" "),a("h4",{attrs:{id:"发布或更新-rtmp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布或更新-rtmp"}},[t._v("#")]),t._v(" 发布或更新 rtmp")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Method: "),a("code",[t._v("HTTP POST")])])]),t._v(" "),a("li",[a("p",[t._v("URL: "),a("code",[t._v("/rtmp/exchange")])])]),t._v(" "),a("li",[a("p",[t._v("Content-Type: "),a("code",[t._v("json")])])]),t._v(" "),a("li",[a("p",[t._v("Request Header")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("clientVersion")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("sdk版本号")]),t._v(" "),a("td",[t._v("接口版本号，要求填写真实sdk版本号，越详细越好")])]),t._v(" "),a("tr",[a("td",[t._v("clientType")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("WeChat-MiniProgram")]),t._v(" "),a("td",[t._v("xiaomi、华为、iphone8、windows2010")])]),t._v(" "),a("tr",[a("td",[t._v("Token")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("VoIP Token")]),t._v(" "),a("td",[t._v("用于鉴权，其中也携带了 App 或房间的相关配置")])]),t._v(" "),a("tr",[a("td",[t._v("RoomId")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("房间 ID")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("RoomType")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("房间类型(普通音视频/直播)")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("App-Key")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("开发者的Key")]),t._v(" "),a("td")])])]),t._v(" "),a("blockquote",[a("p",[t._v("Header 部分可以直接 copy 作为与 MediaServer "),a("code",[t._v("exchange")]),t._v(" 使用。")])]),t._v(" "),a("ul",[a("li",[t._v("Request Body")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("rtmp")]),t._v(" "),a("td",[t._v("dict")]),t._v(" "),a("td",[t._v("客户端要发送本地流的 rtmp 信息")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmp.audio")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("true/false")]),t._v(" "),a("td",[t._v("是否发送音频")])]),t._v(" "),a("tr",[a("td",[t._v("rtmp.video")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("true/false")]),t._v(" "),a("td",[t._v("是否发送视频")])]),t._v(" "),a("tr",[a("td",[t._v("rtmp.resolution")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("0X0")]),t._v(" "),a("td",[t._v("视频分辨率")])]),t._v(" "),a("tr",[a("td",[t._v("rtmp.uri")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("拉流的 rtmp uri")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmp.timestamp")]),t._v(" "),a("td",[t._v("long")]),t._v(" "),a("td",[t._v("发布资源的时间戳")]),t._v(" "),a("td",[t._v("如果时间戳变更，则表明 uri 或资源类型变更，需要重新拉取和发布。小于当前的时间戳可以忽略")])]),t._v(" "),a("tr",[a("td",[t._v("rtmp.rtmpSubscribeList..userId")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("rtc2rtmp 的用户 Id")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("rtmp.rtmpSubscribeList..rtmpUri")]),t._v(" "),a("td",[t._v("long")]),t._v(" "),a("td",[t._v("rtc2rtmp 的用户推送到的 uri")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[t._v("| rtc.subscribeList | list | 订阅列表，与普通 RTC 格式完全一致 |  |\n| rtc.subscribeList..uri | string | 资源 URI |  |\n| rtc.subscribeList..simulcast | int | 资源订阅大流或小流(1: 大流，2: 小流，为空\n默认小流) |  |\n| rtc.extend | string | 传递给后端服务的扩展字段，比如录像 |  |")]),t._v(" "),a("blockquote",[a("p",[t._v("rtc 部分可以直接 copy 作为与 MediaServer "),a("code",[t._v("exchange")]),t._v("  body 使用，但是 sdp 字段徐需要转码服务生成。")])]),t._v(" "),a("ul",[a("li",[t._v("示例")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"audio"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"video"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resolution"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0X0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtmp://XXXXX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1586273915475")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmpSubscribeList"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmpUri"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtmp://XXXXX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtmpUri"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtmp://XXXXX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rtc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subscribeList"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"simulcast"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//扩展配置，mediaserver不解析，透传给后端服务")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extend"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{\\"resolutionInfo\\":\\"0X0\\"}"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("ul",[a("li",[t._v("Response")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("resultCode")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("错误码")]),t._v(" "),a("td",[t._v("10000 为成功")])]),t._v(" "),a("tr",[a("td",[t._v("sdp")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("协商返回的 sdp 信息")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("publishList")]),t._v(" "),a("td",[t._v("dict")]),t._v(" "),a("td",[t._v("发布资源 uri 列表")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("clusterId")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("MediaServer 数据中心 URL")]),t._v(" "),a("td")])])]),t._v(" "),a("blockquote",[a("p",[t._v("与 MediaServer 交互 "),a("code",[t._v("exchange")]),t._v(" response 直接透传即可。")])]),t._v(" "),a("ul",[a("li",[t._v("正常示例")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sdp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"answer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sdp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxx"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publishList"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发布的资源")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mediaType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mediaType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uri"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"clusterId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://awsnx-rtc40-data-rtc40-109.rongcloud.net"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("ul",[a("li",[t._v("异常示例")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http server hasn\'t the processor"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h4",{attrs:{id:"rtmp-退出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rtmp-退出"}},[t._v("#")]),t._v(" rtmp 退出")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Method: "),a("code",[t._v("HTTP POST")])])]),t._v(" "),a("li",[a("p",[t._v("URL: "),a("code",[t._v("/rtmp/exit")])])]),t._v(" "),a("li",[a("p",[t._v("Content-Type: "),a("code",[t._v("json")])])]),t._v(" "),a("li",[a("p",[t._v("Request Header")])])]),t._v(" "),a("p",[t._v("| clientVersion |  string | sdk版本号 | 接口版本号，要求填写真实sdk版本号，越详细越好 |\n| clientType | string | WeChat-MiniProgram | xiaomi、华为、iphone8、windows2010 | 操作系统版本 |       |\n| Token | string | VoIP Token | 用于鉴权，其中也携带了 App 或房间的相关配置 |\n| RoomId | string | 房间 ID |       |\n| RoomType | int | 房间类型(普通音视频/直播) |       |\n| App-Key | string | 开发者的Key |       |")]),t._v(" "),a("blockquote",[a("p",[t._v("Header 部分可以直接 copy 作为与 MediaServer "),a("code",[t._v("exit")]),t._v(" 使用。")])]),t._v(" "),a("ul",[a("li",[t._v("Request Body")])]),t._v(" "),a("p",[t._v("无")]),t._v(" "),a("ul",[a("li",[t._v("Response")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("值")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("resultCode")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("错误码")]),t._v(" "),a("td",[t._v("10000 为成功")])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("错误原因")]),t._v(" "),a("td",[t._v("若请求成功，则为空")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("与 MediaServer 交互 "),a("code",[t._v("exit")]),t._v(" response 直接透传即可。")])]),t._v(" "),a("ul",[a("li",[t._v("正常示例")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("异常示例")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resultCode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http server hasn\'t the processor"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);